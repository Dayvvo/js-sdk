<script type="module">
  // TODO: change to proper package
  import { nwc } from "https://esm.sh/rolznz-test5@3.9.0"; // jsdelivr.net, skypack.dev also work
  window.launchNwc = async () => {
    try {
      // TODO: change default to my.albyhub.com
      const authUrl = prompt("Auth URL", "http://localhost:5173/apps/new");
      const nwcClient = await nwc.NWCClient.fromAuthorizationUrl(authUrl, {
        name: "Deeplink " + Date.now(),
      });
      const result = await nwcClient.getInfo();
      alert("Info response: " + JSON.stringify(result));
    } catch (error) {
      console.error(error);
      alert("Something went wrong: " + error);
    }
  };
</script>

<button onclick="window.launchNwc()">Connect NWC</button>
